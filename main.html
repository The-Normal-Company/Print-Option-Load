<!DOCTYPE html>
<html>
<head>
    <title>Print Barcode</title>
    <script type="text/javascript">
        // Function to get URL parameter by name
        function getQueryParam(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        // Function to print the image
        function printImage() {
            // Get the imageUrl parameter from the URL, which is expected to be encoded
            var imageUrl = getQueryParam('imageUrl');

            if (imageUrl) {
                // Create an img element
                var img = document.createElement('img');
                img.onload = function() {
                    // Trigger print dialog once image is loaded
                    window.print();
                };
                img.src = imageUrl; // The URL is already decoded by getQueryParam
                img.style.maxWidth = '100%'; // Ensure the image fits the page
                img.style.height = 'auto';

                // Append the image to the body
                document.body.appendChild(img);
            } else {
                alert('No image URL provided!');
            }
        }
    </script>
</head>
<body onload="printImage()">
    <!-- The image will be dynamically inserted and printed -->
</body>
</html>

